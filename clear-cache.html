<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com;">
    <title>ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ - ãƒã‚¹ãƒã‚¸ï¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4">
    <div class="max-w-2xl w-full bg-white/10 backdrop-blur-sm rounded-lg p-8 text-white">
        <h1 class="text-3xl font-bold mb-6 text-center">ğŸ”„ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ãƒ„ãƒ¼ãƒ«</h1>

        <div class="space-y-6">
            <!-- èª¬æ˜ -->
            <div class="bg-blue-500/20 rounded-lg p-4">
                <h2 class="font-bold mb-2">ğŸ“Œ ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦</h2>
                <p class="text-sm">
                    ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚ŒãŸå¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦ã€æœ€æ–°ç‰ˆã®ã‚¢ãƒ—ãƒªã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
                </p>
            </div>

            <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
            <div class="bg-gray-800/50 rounded-lg p-4">
                <h2 class="font-bold mb-3">ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>
                <div id="status" class="space-y-2">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
                        <span>æº–å‚™ä¸­...</span>
                    </div>
                </div>
            </div>

            <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
            <div class="space-y-3">
                <button id="clearCacheBtn" class="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105 active:scale-95 shadow-lg">
                    ğŸ—‘ï¸ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Œå…¨ã«ã‚¯ãƒªã‚¢
                </button>

                <button id="reloadBtn" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105 active:scale-95 shadow-lg">
                    ğŸ”„ å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰
                </button>

                <button onclick="window.location.href='index.html'" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105 active:scale-95 shadow-lg">
                    ğŸ  ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸
                </button>
            </div>

            <!-- æ‰‹å‹•æ‰‹é † -->
            <div class="bg-yellow-500/20 rounded-lg p-4">
                <h2 class="font-bold mb-2">ğŸ’¡ æ‰‹å‹•ã§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢æ–¹æ³•</h2>
                <div class="text-sm space-y-2">
                    <p><strong>Windows (Chrome/Edge):</strong></p>
                    <ul class="list-disc list-inside ml-2">
                        <li><kbd class="bg-gray-700 px-2 py-1 rounded">Ctrl</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">Shift</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">Delete</kbd></li>
                        <li>ã¾ãŸã¯ <kbd class="bg-gray-700 px-2 py-1 rounded">Ctrl</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">Shift</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">R</kbd> (å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰)</li>
                    </ul>
                    <p class="mt-2"><strong>Mac (Chrome/Safari):</strong></p>
                    <ul class="list-disc list-inside ml-2">
                        <li><kbd class="bg-gray-700 px-2 py-1 rounded">Cmd</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">Shift</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">Delete</kbd></li>
                        <li>ã¾ãŸã¯ <kbd class="bg-gray-700 px-2 py-1 rounded">Cmd</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">Shift</kbd> + <kbd class="bg-gray-700 px-2 py-1 rounded">R</kbd> (å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const statusDiv = document.getElementById('status');

        function updateStatus(message, type = 'info') {
            const colors = {
                info: 'bg-blue-500',
                success: 'bg-green-500',
                warning: 'bg-yellow-500',
                error: 'bg-red-500'
            };

            const statusItem = document.createElement('div');
            statusItem.className = 'flex items-center gap-2';
            statusItem.innerHTML = `
                <div class="w-3 h-3 ${colors[type]} rounded-full"></div>
                <span>${message}</span>
            `;
            statusDiv.appendChild(statusItem);
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        window.addEventListener('load', () => {
            statusDiv.innerHTML = '';
            updateStatus('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ãƒ„ãƒ¼ãƒ«ã®æº–å‚™å®Œäº†', 'success');

            // Service Workerãƒã‚§ãƒƒã‚¯
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(registrations => {
                    if (registrations.length > 0) {
                        updateStatus(`${registrations.length}å€‹ã®Service Workerã‚’æ¤œå‡º`, 'info');
                    } else {
                        updateStatus('Service Workeræœªç™»éŒ²', 'info');
                    }
                });
            }

            // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚§ãƒƒã‚¯
            if ('caches' in window) {
                caches.keys().then(keys => {
                    if (keys.length > 0) {
                        updateStatus(`${keys.length}å€‹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’æ¤œå‡º`, 'info');
                    } else {
                        updateStatus('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã—', 'info');
                    }
                });
            }
        });

        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³
        document.getElementById('clearCacheBtn').addEventListener('click', async () => {
            statusDiv.innerHTML = '';
            updateStatus('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢é–‹å§‹...', 'info');

            try {
                // Service Workerå‰Šé™¤
                if ('serviceWorker' in navigator) {
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    for (const registration of registrations) {
                        await registration.unregister();
                    }
                    updateStatus(`${registrations.length}å€‹ã®Service Workerã‚’å‰Šé™¤`, 'success');
                }

                // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‰Šé™¤
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    for (const cacheName of cacheNames) {
                        await caches.delete(cacheName);
                    }
                    updateStatus(`${cacheNames.length}å€‹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å‰Šé™¤`, 'success');
                }

                // LocalStorageè­¦å‘Šï¼ˆã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿å«ã‚€ï¼‰
                updateStatus('âš ï¸ LocalStorageã¯ä¿æŒã•ã‚Œã¾ã™ï¼ˆã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ä¿è­·ï¼‰', 'warning');

                updateStatus('âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢å®Œäº†ï¼', 'success');
                updateStatus('ğŸ’¡ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„', 'info');

                // 3ç§’å¾Œã«è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰
                setTimeout(() => {
                    window.location.reload(true);
                }, 3000);

            } catch (error) {
                updateStatus(`âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        });

        // å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³
        document.getElementById('reloadBtn').addEventListener('click', () => {
            updateStatus('å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰ä¸­...', 'info');
            // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡è¦–ã—ã¦ãƒªãƒ­ãƒ¼ãƒ‰
            window.location.reload(true);
        });
    </script>
</body>
</html>
