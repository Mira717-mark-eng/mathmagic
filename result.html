<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµæœ - ãƒã‚¹ãƒã‚¸ï¼</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="min-h-screen fantasy-bg">
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="container mx-auto px-4 py-8 flex items-center justify-center min-h-screen">
        <div class="max-w-2xl w-full">
            
            <!-- çµæœã‚«ãƒ¼ãƒ‰ -->
            <div id="result-card" class="result-card animate-zoom-in">
                
                <!-- æ­£è§£ã®å ´åˆ -->
                <div id="correct-result" class="result-success hidden">
                    <div class="text-center mb-8">
                        <div class="text-8xl mb-4 animate-bounce">ğŸ‰</div>
                        <h1 class="text-6xl font-bold text-green-600 mb-4">æ­£è§£ï¼</h1>
                        <p class="text-2xl text-gray-700">ç´ æ™´ã‚‰ã—ã„ï¼</p>
                    </div>
                    
                    <!-- çµŒé¨“å€¤ç²å¾— -->
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-6 mb-6 text-center shadow-xl animate-pulse">
                        <div class="text-white text-xl font-bold mb-2">çµŒé¨“å€¤ç²å¾—ï¼</div>
                        <div class="text-5xl font-bold text-white">
                            +<span id="exp-gained">50</span> XP
                        </div>
                    </div>
                </div>
                
                <!-- ä¸æ­£è§£ã®å ´åˆ -->
                <div id="incorrect-result" class="result-fail hidden">
                    <div class="text-center mb-8">
                        <div class="text-8xl mb-4">ğŸ’¡</div>
                        <h1 class="text-5xl font-bold text-orange-600 mb-4">æƒœã—ã„ï¼</h1>
                        <p class="text-xl text-gray-700 mb-4">ã‚‚ã†ä¸€æ­©ã ã£ãŸã­ï¼</p>
                        
                        <div class="bg-blue-100 rounded-xl p-6 border-2 border-blue-300">
                            <p class="text-gray-600 mb-2">æ­£ã—ã„ç­”ãˆã¯...</p>
                            <p class="text-5xl font-bold text-blue-600">
                                <span id="correct-answer">12</span>
                                <span id="correct-unit">å€‹</span>
                            </p>
                        </div>
                        
                        <p class="text-lg text-gray-600 mt-4">æ¬¡ã‚‚é ‘å¼µã‚ã†ï¼âœ¨</p>
                    </div>
                </div>
                
                <!-- ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ¼”å‡º -->
                <div id="levelup-display" class="hidden mb-6">
                    <div class="levelup-animation bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-8 text-center shadow-2xl">
                        <div class="text-6xl mb-4 animate-bounce">âœ¨</div>
                        <h2 class="text-4xl font-bold text-white mb-4">ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼</h2>
                        <div class="text-3xl font-bold text-yellow-300">
                            Lv.<span id="old-level">1</span> â†’ Lv.<span id="new-level">2</span>
                        </div>
                        <p class="text-white text-xl mt-4">ãŠã‚ã§ã¨ã†ï¼å¼·ããªã£ãŸã‚ˆï¼</p>
                    </div>
                </div>
                
                <!-- AIè§£èª¬ã‚¨ãƒªã‚¢ï¼ˆæ­£è§£æ™‚ã®ã¿è¡¨ç¤ºï¼‰ -->
                <div id="explanation-container" class="mb-6"></div>
                
                <!-- çµ±è¨ˆæƒ…å ± -->
                <div class="bg-white/90 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">
                        <i class="fas fa-chart-line text-purple-600 mr-2"></i>
                        ç¾åœ¨ã®æˆç¸¾
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center bg-purple-100 rounded-lg p-4">
                            <div class="text-3xl font-bold text-purple-600" id="current-level">Lv.1</div>
                            <div class="text-sm text-gray-600">ãƒ¬ãƒ™ãƒ«</div>
                        </div>
                        <div class="text-center bg-green-100 rounded-lg p-4">
                            <div class="text-3xl font-bold text-green-600"><span id="accuracy-rate">100</span>%</div>
                            <div class="text-sm text-gray-600">æ­£ç­”ç‡</div>
                        </div>
                        <div class="text-center bg-blue-100 rounded-lg p-4">
                            <div class="text-3xl font-bold text-blue-600"><span id="total-problems">1</span>å•</div>
                            <div class="text-sm text-gray-600">è§£ã„ãŸæ•°</div>
                        </div>
                        <div class="text-center bg-orange-100 rounded-lg p-4">
                            <div class="text-3xl font-bold text-orange-600"><span id="elapsed-time">0:00</span></div>
                            <div class="text-sm text-gray-600">æ‰€è¦æ™‚é–“</div>
                        </div>
                    </div>
                </div>
                
                <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="space-y-4">
                    <!-- æ¬¡ã®å•é¡Œã¸ï¼ˆ10å•ç›®ä»¥å¤–ï¼‰ -->
                    <button id="next-problem-btn" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white text-2xl font-bold py-4 rounded-xl shadow-xl transition transform hover:scale-105">
                        <i class="fas fa-arrow-right mr-3"></i>
                        æ¬¡ã®å•é¡Œã¸
                    </button>
                    
                    <!-- çµæœã‚’è¦‹ã‚‹ï¼ˆ10å•ç›®ï¼‰ -->
                    <button id="finish-btn" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white text-2xl font-bold py-4 rounded-xl shadow-xl transition transform hover:scale-105 hidden">
                        <i class="fas fa-trophy mr-3"></i>
                        å†’é™ºå®Œäº†ï¼
                    </button>
                    
                    <!-- ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ—ã«æˆ»ã‚‹ -->
                    <button id="back-to-map-btn" class="w-full bg-gray-500 hover:bg-gray-600 text-white text-lg font-bold py-3 rounded-xl transition">
                        <i class="fas fa-map mr-2"></i>
                        ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ—ã«æˆ»ã‚‹
                    </button>
                </div>
                
            </div>
            
        </div>
    </main>
    
    <!-- Scripts -->
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
        window.addEventListener('error', function(e) {
            console.error('==================');
            console.error('ğŸš¨ ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼ˆresult.htmlï¼‰');
            console.error('ã‚¨ãƒ©ãƒ¼:', e.error);
            console.error('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:', e.message);
            console.error('ãƒ•ã‚¡ã‚¤ãƒ«:', e.filename);
            console.error('è¡Œç•ªå·:', e.lineno);
            console.error('==================');

            // ã‚¨ãƒ©ãƒ¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
            const errorDiv = document.createElement('div');
            errorDiv.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:20px;border:3px solid red;z-index:9999;max-width:80%;';
            errorDiv.innerHTML = `
                <h2 style="color:red;margin:0 0 10px 0;">âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
                <p><strong>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</strong> ${e.message}</p>
                <p><strong>ãƒ•ã‚¡ã‚¤ãƒ«:</strong> ${e.filename}</p>
                <p><strong>è¡Œç•ªå·:</strong> ${e.lineno}</p>
                <button onclick="this.parentElement.remove()" style="background:red;color:white;padding:10px 20px;border:none;cursor:pointer;margin-top:10px;">é–‰ã˜ã‚‹</button>
                <button onclick="window.location.href='world-map.html'" style="background:blue;color:white;padding:10px 20px;border:none;cursor:pointer;margin-top:10px;margin-left:10px;">ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ—ã«æˆ»ã‚‹</button>
            `;
            document.body.appendChild(errorDiv);

            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã‚’é˜²ã
            e.preventDefault();
            return false;
        });

        console.log('==================');
        console.log('ğŸ“„ result.htmlèª­ã¿è¾¼ã¿é–‹å§‹');
        console.log('==================');
    </script>
    <script src="js/main.js"></script>
    <script src="js/player.js"></script>
    <script src="js/inventory-system.js"></script>
    <script src="js/shop-system.js"></script>
    <script src="js/item-drop-system.js"></script>
    <script src="js/result.js"></script>

</body>
</html>
